!function(a){var b,c,d={};b=a.fn.slideprojector=function(b,c){return this.each(function(){return a.data(this,"slideprojector")||a.data(this,"slideprojector",new d[b.implementation](this,b,c)),this})},b.defaults={implementation:null,slideItems:null,scrollPrevControl:null,scrollNextControl:null,selectedIndex:0,cycleSlides:!0,previewItems:null,duration:1e3,idleScroll:!1,idleScrollInterval:4e3,idleScrollIntroOnly:!0,onBeforeScroll:null,onAfterScroll:null,hiddenClassName:"sp-hidden",previewSelectedClassName:"sp-selected"},b.registerImplementation=function(a,b){var e=function(){};e.prototype=c.prototype,a.prototype=new e,a.prototype.constructor=a,a.prototype.__super=c.prototype,a.prototype.__super.constructor=c,d[b]=a},c=function(c,d,e){this.options=a.extend({},b.defaults,d),this.implOptions=a.extend({},this.getImplementationDefaults(),e),this.slideItems=a(this.options.slideItems),this.contentStripe=a(c),this.currentIndex=[this.options.selectedIndex||0],this.lastIndex=this.slideItems.length-1,this.scrollPrevControl=a(this.options.scrollPrevControl),this.scrollNextControl=a(this.options.scrollNextControl),this.previewItems=a(this.options.previewItems),this.initUserEvents(),this.options.idleScroll&&this.initIdleScroll(),this.updatePrevNext()},c.prototype={getImplementationDefaults:function(){return{}},initUserEvents:function(){this.scrollPrevControl.click(this.onScrollPrev.bind(this)),this.scrollNextControl.click(this.onScrollNext.bind(this)),this.previewItems.click(this.onPreviewClick.bind(this))},initIdleScroll:function(){this.idleSlideTimeout=null,this.setIdleSlideTimeout(),this.contentStripe.mouseenter(this.clearIdleSlideTimeout.bind(this)).mouseleave(this.setIdleSlideTimeout.bind(this)),this.options.idleScrollIntroOnly&&this.previewItems.one("click",function(){this.contentStripe.unbind("mouseenter",this.clearIdleSlideTimeout).unbind("mouseleave",this.setIdleSlideTimeout)}.bind(this))},setIdleSlideTimeout:function(){this.idleSlideTimeout=setTimeout(this.idleSlide.bind(this),this.options.idleScrollInterval)},clearIdleSlideTimeout:function(){clearTimeout(this.idleSlideTimeout)},idleSlide:function(){var a=this.currentIndex[0];++a>this.lastIndex&&(a=0),this.scroll(a),this.setIdleSlideTimeout()},getCurrentItem:function(){return this.getItem(this.currentIndex[0])},getItem:function(b){return a(this.slideItems.get(b))},onScrollPrev:function(){this.scroll(null,-1)},onScrollNext:function(){this.scroll(null,1)},onPreviewClick:function(b){this.scroll(this.previewItems.index(a(b.target)))},scroll:function(a,b){var c=!0;this.clearIdleSlideTimeout(),a=null===a||isNaN(Number(a))?this.currentIndex[0]+b:a,a=this.options.cycleSlides?0>a?this.lastIndex:a>this.lastIndex?0:a:a,this.beforeScroll(a)&&("function"==typeof this.options.onBeforeScroll&&(c=this.options.onBeforeScroll()),c&&(this.performScroll(a),this.afterScroll(a),"function"==typeof this.options.onAfterScroll&&this.options.onAfterScroll.call(this)))},beforeScroll:function(a){return a!==this.currentIndex[0]&&a>=0&&a<=this.lastIndex},afterScroll:function(b){this.currentIndex[0]=b,this.updatePrevNext(),a(this.previewItems.removeClass(this.options.previewSelectedClassName).get(b)).addClass(this.options.previewSelectedClassName)},updatePrevNext:function(){this.options.cycleSlides||(this.scrollPrevControl[this.currentIndex<=0?"addClass":"removeClass"](this.options.hiddenClassName),this.scrollNextControl[this.currentIndex>=this.lastIndex?"addClass":"removeClass"](this.options.hiddenClassName))},performScroll:function(){throw"performScroll should be implemented"}}}(jQuery),function(a){var b=function(){this.__super.constructor.apply(this,arguments),a(this.slideItems.css("opacity",0).addClass(this.options.hiddenClassName).get(this.currentIndex)).css("opacity",1).removeClass(this.options.hiddenClassName),a(this.previewItems.removeClass(this.options.previewSelectedClassName).get(this.currentIndex[0])).addClass(this.options.previewSelectedClassName),this.inProgress=!1};a.fn.slideprojector.registerImplementation(b,"fade"),a.extend(b.prototype,{getImplementationDefaults:function(){return{queueSlidesAnimation:!1}},beforeScroll:function(){return!this.inProgress&&this.__super.beforeScroll.apply(this,arguments)},performScroll:function(a){this.implOptions.queueSlidesAnimation?this.performScroll_out(this.performScroll_in.bind(this,a)):(this.performScroll_out(),this.performScroll_in(a))},performScroll_out:function(a){var b=this.getCurrentItem();this.inProgress=!0,b.animate({opacity:0},{queue:!1,duration:this.options.duration,complete:function(){b.addClass(this.options.hiddenClassName),"function"==typeof a&&a()}.bind(this)})},performScroll_in:function(a){this.getItem(a).removeClass(this.options.hiddenClassName).animate({opacity:1},{queue:!1,duration:this.options.duration,complete:function(){this.inProgress=!1}.bind(this)})}})}(jQuery),function(a){var b=function(){this.__super.constructor.apply(this,arguments),this.initLayout()};a.fn.slideprojector.registerImplementation(b,"poproll"),a.extend(b.prototype,{initLayout:function(){var b=0;this.viewportWidth=this.contentStripe.width(),this.prevViewportWidth=this.viewportWidth,this.sections=[[],[],[]],this.visibleWidth=0,this.popIndex=0,this.slideItems.each(function(c,d){var e=a(d),f=e.outerWidth(!0);e.data("cwidth",f),e.data("oversized",f>this.viewportWidth),e.data("visibleWidth",f>this.viewportWidth?0:f),e.data("oversized")&&e.hide(),c<this.currentIndex[0]?(e.hide(),this.sections[0].push(e)):(b+=e.data("visibleWidth"),b<this.viewportWidth?(this.sections[1].push(e),this.visibleWidth=this.visibleWidth+e.data("visibleWidth")):(this.sections[2].push(e),e.hide()))}.bind(this)),this.afterScroll(0),a(window).resize(this.onResize.bind(this))},beforeScroll:function(a){return this.sections[this.currentIndex[0]<a?2:0].length>0},performScroll:function(a){var b,c,d;if(this.currentIndex[0]<a){for(;this.sections[2].length&&this.sections[2][0].data("oversized");)this.sections[1].push(this.sections[2].shift());for(c=this.sections[2][0],this.visibleWidth+=c.data("cwidth"),this.sections[1].push(this.sections[2].shift()),d=this.sections[1][0];this.visibleWidth>this.viewportWidth;)b=this.sections[1][0],d=d.add(b),this.visibleWidth-=b.data("visibleWidth"),this.sections[0].push(this.sections[1].shift());for(b=this.sections[2][0];this.sections[2].length&&this.visibleWidth+b.data("visibleWidth")<=this.viewportWidth;)b.data("oversized")||(c=c.add(b)),this.visibleWidth+=b.data("visibleWidth"),this.sections[1].push(this.sections[2].shift()),b=this.sections[2][0]}else{for(;this.sections[0].length&&this.sections[0][this.sections[0].length-1].data("oversized");)this.sections[1].unshift(this.sections[0].pop());for(c=this.sections[0][this.sections[0].length-1],this.visibleWidth+=c.data("visibleWidth"),this.sections[1].unshift(this.sections[0].pop()),d=this.sections[1][this.sections[1].length-1];this.visibleWidth>this.viewportWidth;)b=this.sections[1][this.sections[1].length-1],d=d.add(b),this.visibleWidth-=b.data("visibleWidth"),this.sections[2].unshift(this.sections[1].pop());for(b=this.sections[0][this.sections[0].length-1];this.sections[0].length&&this.visibleWidth+b.data("visibleWidth")<=this.viewportWidth;)b.data("oversized")||(c=c.add(b)),this.visibleWidth+=b.data("visibleWidth"),this.sections[1].unshift(this.sections[0].pop()),b=this.sections[0][this.sections[0].length-1]}d.hide(this.options.duration),c.show(this.options.duration)},afterScroll:function(){this.currentIndex[0]=this.sections[0].length;var b=this.sections[0].length;a.each(this.sections[0],function(a,c){c.data("oversized")&&b--});var c=this.sections[2].length;a.each(this.sections[2],function(a,b){b.data("oversized")&&c--}),this.scrollPrevControl[b?"removeClass":"addClass"](this.options.hiddenClassName),this.scrollNextControl[c?"removeClass":"addClass"](this.options.hiddenClassName)},onResize:function(){var b,c=this.contentStripe.width();if(c!==this.prevViewportWidth){for(this.slideItems.each(function(b,d){var e=a(d);e.data("oversized",e.data("cwidth")>c),e.data("visibleWidth",e.data("oversized")?0:e.data("cwidth")),e.data("oversized")&&e.hide(this.options.duration)}.bind(this)),this.visibleWidth=0,this.sections[1]=[],this.sections[2]=[],this.slideItems.each(function(b,d){if(b>=this.sections[0].length){var e=a(d);this.visibleWidth+e.data("visibleWidth")<c?(this.sections[1].push(e),e.data("oversized")||e.show(this.options.duration),this.visibleWidth+=e.data("visibleWidth")):(this.sections[2].push(e),e.hide(this.options.duration))}}.bind(this)),b=this.sections[0][this.sections[0].length-1];this.sections[0].length&&this.visibleWidth+b.data("visibleWidth")<=c;)b.data("oversized")||b.show(this.options.duration),this.visibleWidth+=b.data("visibleWidth"),this.sections[1].unshift(this.sections[0].pop()),b=this.sections[0][this.sections[0].length-1];this.afterScroll(),this.viewportWidth=c,this.prevViewportWidth=c}}})}(jQuery),function(a){var b=function(){this.__super.constructor.apply(this,arguments),a(this.slideItems.addClass(this.options.hiddenClassName).get(this.currentIndex)).removeClass(this.options.hiddenClassName),a(this.previewItems.removeClass(this.options.previewSelectedClassName).get(this.currentIndex[0])).addClass(this.options.previewSelectedClassName),this.inProgress=!1};a.fn.slideprojector.registerImplementation(b,"slide"),a.extend(b.prototype,{getImplementationDefaults:function(){return{basicZIndex:0,animationZIndex:1}},beforeScroll:function(){return!this.inProgress&&this.__super.beforeScroll.apply(this,arguments)},performScroll:function(a){var b=this.getCurrentItem(),c=this.getItem(a);this.inProgress=!0,c.css({zIndex:this.implOptions.animationZIndex,left:a>this.currentIndex[0]?"100%":"-100%"}).removeClass(this.options.hiddenClassName).animate({left:0},{queue:!1,duration:this.options.duration,complete:function(){c.css("zIndex",this.implOptions.basicZIndex),b.addClass(this.options.hiddenClassName),this.inProgress=!1}.bind(this)})}})}(jQuery);